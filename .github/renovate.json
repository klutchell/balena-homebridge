{
  "extends": [
    "github>klutchell/renovate-config"
  ],
  "packageRules": [
    {
      "matchDepNames": [
        "homebridge/homebridge"
      ],
      "matchDatasources": [
        "docker"
      ],
      "versioning": "regex:^(?<compatibility>.*)-(?<major>\\d{4})-0?(?<minor>\\d{1,2})-0?(?<patch>\\d{1,2})$"
    },
    {
      "matchDepNames": [
        "homebridge/homebridge"
      ],
      "matchDatasources": [
        "docker"
      ],
      "matchUpdateTypes": ["major", "minor", "patch"],
      "postUpgradeTasks": {
        "commands": [
          "sed \"s|^version: .*$|version: {{{newMajor}}}.{{{newMinor}}}.{{{newPatch}}}|\" -i balena.yml"
        ],
        "fileFilters": ["balena.yml"],
        "executionMode": "update"
      }
    }
  ]
}
