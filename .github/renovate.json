{
  "extends": [
    "github>klutchell/renovate-config"
  ],
  "packageRules": [
    {
      "matchDepNames": [
        "homebridge/homebridge"
      ],
      "matchDatasources": [
        "docker"
      ],
      "versioning": "regex:^(?<compatibility>.*)-(?<major>\\d{4})-0?(?<minor>\\d{1,2})-0?(?<patch>\\d{1,2})$"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/(^|/)balena\\.ya?ml$/"
      ],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-z-.]+?) depName=(?<depName>[^\\s]+?)(?: (?:packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?(?: registryUrl=(?<registryUrl>[^\\s]+?))?\\s+version:\\s*[\"']?(?<currentVersion>.+?)[\"']?\\s"
      ],
      "versioningTemplate": "regex:^(?<compatibility>.*)-(?<major>\\d{4})-0?(?<minor>\\d{1,2})-0?(?<patch>\\d{1,2})$",
      "currentValueTemplate": "{{{compatibility}}}-{{{replace '\\.' '-' currentValue}}}",
      "autoReplaceStringTemplate": "version: {{{major}}}.{{{minor}}}.{{{patch}}}"
    }
  ]
}
